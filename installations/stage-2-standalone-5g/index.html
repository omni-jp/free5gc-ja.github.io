<!DOCTYPE html>
<html lang="en" >

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta property="og:title" content="" />
<meta property="og:description" content="free5GC Stage 2 Installation Guide Minimum Requirement  Software  OS: Ubuntu 18.04 or later versions gcc 7.3.0 Go 1.12.9 linux/amd64 QEMU emulator 2.11.1    Note: Please use Ubuntu 18.04 or later versions and go 1.12.9 linux/amd64
You can use go version to check your current Go version." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://free5gc.org/installations/stage-2-standalone-5g/" />




<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="free5GC Stage 2 Installation Guide Minimum Requirement  Software  OS: Ubuntu 18.04 or later versions gcc 7.3.0 Go 1.12.9 linux/amd64 QEMU emulator 2.11.1    Note: Please use Ubuntu 18.04 or later versions and go 1.12.9 linux/amd64
You can use go version to check your current Go version."/>
<meta name="generator" content="Hugo 0.79.1" />

    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "url": "https://free5gc.org/installations/stage-2-standalone-5g/",
  "wordCount": "599",
  "datePublished": "0001-01-01T00:00:00+00:00",
  "author": {
    "@type": "Person",
    "name": "Your Name"
  }
}
</script>



    <link rel="canonical" href="https://free5gc.org/installations/stage-2-standalone-5g/">

    <title> | free5GC</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">

    <!-- combined, minified CSS -->
    
    <link href="https://free5gc.org/css/bootstrap-icons.0568af55d343ad2fc9c221a17a15697dc5ef49add4551c5eb3e59d7582385228.css" rel="stylesheet">
    
    <link href="https://free5gc.org/css/style.73f0736b85bdf48090ed384697200a968c025d194f60717e37a515c4c87a8893.css" rel="stylesheet">

    <!-- minified base javascript -->
    
    <script defer src="https://free5gc.org/js/base.e5993f7509e480925eff41173b2176d6d85ef3df70ad0388d9275d09f0c3d966.js" crossorigin="anonymous"></script>

    

  </head>

  <body>

    
    <header class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
      <p class="h5 my-0 me-md-auto fw-normal">
        <a class="nav-link " href="https://free5gc.org">
          <img src="/img/free5GC.png" width="217" height="51">
        </a>
      </p>
      <nav class="btn-group" role="group" aria-label="Basic outlined example">
          
          <a class="btn btn-outline-primary"
             href="/" title="Home">Home</a>
          
        
          
          <a class="btn btn-outline-primary"
             href="/roadmap/" title="Roadmap">Roadmap</a>
          
        
          
          <div id="btn-group-install" class="btn-group" role="group">
            <button type="button"
                    class="btn btn-outline-primary dropdown-toggle active"
                    data-bs-toggle="dropdown" aria-expanded="false">
              Installations
            </button>
            <ul class="dropdown-menu" aria-labelledby="btn-group-install">
              
              <li><a class="dropdown-item"
                     
                     title="Stage 1: Cluster"
                     href="/installations/stage-1-cluster/">Stage 1: Cluster</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="Stage 1: All-in-one"
                     href="/installations/stage-1-all-in-one/">Stage 1: All-in-one</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="Stage 2: Standalone 5G"
                     href="/installations/stage-2-standalone-5g/">Stage 2: Standalone 5G</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="Stage 3: free5GC"
                     href="/installations/stage-3/">Stage 3: free5GC</a></li>
              
            </ul>
          </div>
          
        
          
          <a class="btn btn-outline-primary"
             href="/membership/" title="Membership">Membership</a>
          
        
          
          <a class="btn btn-outline-primary"
             href="/contactus/" title="Contact Us">Contact Us</a>
          
        
          
          <div id="btn-group-more" class="btn-group" role="group">
            <button type="button"
                    class="btn btn-outline-primary dropdown-toggle"
                    data-bs-toggle="dropdown" aria-expanded="false">
              More
            </button>
            <ul class="dropdown-menu" aria-labelledby="btn-group-more">
              
              <li><a class="dropdown-item"
                     target="_blank"
                     title="Download"
                     href="https://github.com/free5gc/free5gc">Download</a></li>
              
              <li><a class="dropdown-item"
                     target="_blank"
                     title="Youtube"
                     href="https://www.youtube.com/channel/UCywP5Acj50GlhSxZTJXlqtw/videos">Youtube</a></li>
              
              <li><a class="dropdown-item"
                     target="_blank"
                     title="free5GC Forum"
                     href="https://forum.free5gc.org/">free5GC Forum</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="History"
                     href="/history/">History</a></li>
              
            </ul>
          </div>
          
        
      </nav>
    </header>
    

    <div class="container-fluid mx-auto" style="max-width: 960px;">

      


<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://free5gc.org/installations/stage-2-standalone-5g/"></a></h2>
    <p class="blog-post-meta">

</p>
  </header>
  <div class="text-center mb-4">
  
  <a href="https://github.com/free5gc/free5gc-stage-2" target="_blank">
  <img src="/img/free5GC.png"
       alt="free5GC"
       style="width: 40%;">
  </a>
  
</div>


<h1 id="free5gc-stage-2-installation-guide">free5GC Stage 2 Installation Guide</h1>
<h2 id="minimum-requirement">Minimum Requirement</h2>
<ul>
<li>Software
<ul>
<li>OS: Ubuntu 18.04 or later versions</li>
<li>gcc 7.3.0</li>
<li>Go 1.12.9 linux/amd64</li>
<li>QEMU emulator 2.11.1</li>
</ul>
</li>
</ul>
<div class="alert alert-warning">
<p><strong>Note:</strong> Please use Ubuntu 18.04 or later versions and go 1.12.9 linux/amd64</p>
<p>You can use <code>go version</code> to check your current Go version.</p>
</div>
<ul>
<li>
<p>Hardware</p>
<ul>
<li>CPU: Intel i5 processor</li>
<li>RAM: 4GB</li>
<li>Hard drive: 160G</li>
<li>NIC card: 1Gbps ethernet card</li>
</ul>
</li>
<li>
<p>Hardware recommended</p>
<ul>
<li>CPU: Intel i7 processor</li>
<li>RAM: 8GB</li>
<li>Hard drive: 160G</li>
<li>NIC card: 10Gbps ethernet card</li>
</ul>
</li>
</ul>
<h2 id="hardware-tested">Hardware Tested</h2>
<p>There are no gNB and UE for standalone 5GC available in the market yet.</p>
<h2 id="installation">Installation</h2>
<h3 id="a-install-control-plane-entities">A. Install Control Plane Entities</h3>
<ol>
<li>
<p>Install the required packages</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">sudo apt -y update
sudo apt -y install mongodb wget git
sudo systemctl start mongodb
</code></pre></div></li>
<li>
<p>Go installation
a. If another version of Go is installed</p>
<ul>
<li>Please remove the previous Go version
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">sudo rm -rf /usr/local/go
</code></pre></div></li>
<li>Install Go 1.12.9
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">wget https://dl.google.com/go/go1.12.9.linux-amd64.tar.gz
sudo tar -C /usr/local -zxvf go1.12.9.linux-amd64.tar.gz
</code></pre></div></li>
</ul>
<p>b. Clean installation</p>
<ul>
<li>Install Go 1.12.9
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">wget https://dl.google.com/go/go1.12.9.linux-amd64.tar.gz
sudo tar -C /usr/local -zxvf go1.12.9.linux-amd64.tar.gz
mkdir -p ~/go/<span style="color:#666">{</span>bin,pkg,src<span style="color:#666">}</span>
<span style="color:#007020">echo</span> <span style="color:#4070a0">&#39;export GOPATH=$HOME/go&#39;</span> &gt;&gt; ~/.bashrc
<span style="color:#007020">echo</span> <span style="color:#4070a0">&#39;export GOROOT=/usr/local/go&#39;</span> &gt;&gt; ~/.bashrc
<span style="color:#007020">echo</span> <span style="color:#4070a0">&#39;export PATH=$PATH:$GOPATH/bin:$GOROOT/bin&#39;</span> &gt;&gt; ~/.bashrc
<span style="color:#007020">echo</span> <span style="color:#4070a0">&#39;export GO111MODULE=off&#39;</span> &gt;&gt; ~/.bashrc
<span style="color:#007020">source</span> ~/.bashrc
</code></pre></div></li>
</ul>
</li>
<li>
<p>Clone free5GC project in <code>$GOPATH/src</code></p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> <span style="color:#bb60d5">$GOPATH</span>/src
git clone https://github.com/free5gc/free5gc-stage-2.git free5gc
</code></pre></div></li>
<li>
<p>Run the script to install dependent packages</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> <span style="color:#bb60d5">$GOPATH</span>/src/free5gc
chmod +x ./install_env.sh
./install_env.sh
</code></pre></div> <pre class="alert alert-info py-0" style="white-space: pre-wrap;">
  
 Please ignore error messages during the package dependencies installation process.
    
</li>
</ol>
<p></pre></p>
<ol start="5">
<li>Extract the <code>free5gc_libs.tar.gz</code> to setup the environment for compiling
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> <span style="color:#bb60d5">$GOPATH</span>/src/free5gc
tar -C <span style="color:#bb60d5">$GOPATH</span> -zxvf free5gc_libs.tar.gz
</code></pre></div></li>
<li>Compile network function services in <code>$GOPATH/src/free5gc</code>, e.g. AMF:
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> <span style="color:#bb60d5">$GOPATH</span>/src/free5gc
go build -o bin/amf -x src/amf/amf.go
</code></pre></div></li>
<li>Run network function services, e.g. AMF:
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> <span style="color:#bb60d5">$GOPATH</span>/src/free5gc
./bin/amf
</code></pre></div> <pre class="alert alert-info py-0" style="white-space: pre-wrap;">
  
 In step 3, the folder name should remain free5gc. Please do not modify it or the compilation would fail.
    
</li>
</ol>
<p></pre></p>
<h3 id="b-install-user-plane-entity-upf">B. Install User Plane Entity (UPF)</h3>
<ol>
<li>Install the required packages
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">sudo apt -y update
sudo apt -y install git gcc cmake autoconf libtool pkg-config libmnl-dev libyaml-dev
go get -u github.com/sirupsen/logrus
</code></pre></div></li>
<li>Enter the UPF directory
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> <span style="color:#bb60d5">$GOPATH</span>/src/free5gc/src/upf
</code></pre></div></li>
<li>Build from sources
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">mkdir build
<span style="color:#007020">cd</span> build
cmake ..
make -j <span style="color:#4070a0">`</span>nproc<span style="color:#4070a0">`</span>
</code></pre></div></li>
<li>Run UPF library test
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#666">(</span>In directory: <span style="color:#bb60d5">$GOPATH</span>/src/free5gc/src/upf/build<span style="color:#666">)</span>
sudo ./bin/testgtpv1
</code></pre></div></li>
<li>Config is located at <code>$GOPATH/src/free5gc/src/upf/build/config/upfcfg.yaml</code></li>
</ol>
<h3 id="c-run-procedure-tests">C. Run Procedure Tests</h3>
<p>Start Wireshark to capture any interface with pfcp||icmp||gtp filter and run the tests below to simulate the procedures:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> <span style="color:#bb60d5">$GOPATH</span>/src/free5gc
chmod +x ./test.sh
</code></pre></div><p>a. TestRegistration</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#60a0b0;font-style:italic"># (In directory: $GOPATH/src/free5gc)</span>
./test.sh TestRegistration
</code></pre></div><p>b. TestServiceRequest</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">./test.sh TestServiceRequest
</code></pre></div><p>c. TestXnHandover</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">./test.sh TestXnHandover
</code></pre></div><p>d. TestDeregistration</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">./test.sh TestDeregistration
</code></pre></div><p>e. TestPDUSessionReleaseRequest</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">./test.sh TestPDUSessionReleaseRequest
</code></pre></div><p>f. TestPaging</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">./test.sh TestPaging
</code></pre></div><p>g. TestN2Handover</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">./test.sh TestN2Handover
</code></pre></div><h3 id="appendix-a-web-console">Appendix A: Web Console</h3>
<p>Subscriber information can be managed using the web console.</p>
<ol>
<li>Run the web console server</li>
</ol>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> webconsole
go run server.go
</code></pre></div><ol start="2">
<li>Access the web console by</li>
</ol>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-text" data-lang="text">URL: http://localhost:5000
Username: admin
Password: free5gc
</code></pre></div><h3 id="appendix-b-system-environment-cleaning">Appendix B: System Environment Cleaning</h3>
<p>The below commands may be helpful for development purposes.</p>
<ol>
<li>Remove POSIX message queues
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">ls /dev/mqueue/
rm /dev/mqueue/*
</code></pre></div></li>
<li>Remove gtp tunnels (using tools in libgtpnl)
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> ./src/upf/lib/libgtpnl-1.2.1/tools
./gtp-tunnel list
</code></pre></div></li>
<li>Remove gtp devices (using tools in libgtpnl)
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> ./src/upf/lib/libgtpnl-1.2.1/tools
sudo ./gtp-link del <span style="color:#666">{</span>Dev-Name<span style="color:#666">}</span>
</code></pre></div></li>
</ol>
<h3 id="appendix-c-program-the-sim-card">Appendix C: Program the SIM Card</h3>
<p>Install packages:</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">sudo apt-get install pcscd pcsc-tools libccid python-dev swig python-setuptools python-pip libpcsclite-dev
sudo pip install pycrypto
</code></pre></div><p>Download PySIM</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">git clone git://git.osmocom.org/pysim.git
</code></pre></div><p>Change to pyscard folder and install</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> &lt;pyscard-path&gt;
sudo /usr/bin/python setup.py build_ext install
</code></pre></div><p>Verify your reader is ready</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">sudo pcsc_scan
</code></pre></div><p>Check whether your reader can read the SIM card</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash"><span style="color:#007020">cd</span> &lt;pysim-path&gt;
./pySim-read.py –p <span style="color:#40a070">0</span>
</code></pre></div><p>Program your SIM card information</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:2;-o-tab-size:2;tab-size:2"><code class="language-bash" data-lang="bash">./pySim-prog.py -p <span style="color:#40a070">0</span> -x <span style="color:#40a070">208</span> -y <span style="color:#40a070">93</span> -t sysmoUSIM-SJS1 -i <span style="color:#40a070">208930000000003</span> --op<span style="color:#666">=</span>8e27b6af0e692e750f32667a3b14605d -k 8baf473f2f8fd09487cccbd7097c6862 -s <span style="color:#40a070">8988211000000088313</span> -a <span style="color:#40a070">23605945</span>
</code></pre></div><p>You can get your SIM card from <a href="http://shop.sysmocom.de/products/sysmousim-sjs1-4ff"><strong>sysmocom</strong></a>. You also need a card reader to write your SIM card. You can get a card reader from <a href="https://24h.pchome.com.tw/prod/DCAD59-A9009N6WF"><strong>here</strong></a> or use other similar devices.</p>


  

  
  <hr>
  <footer>

  
    <section>
    <h4></h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ffree5gc.org%2finstallations%2fstage-2-standalone-5g%2f" title="Share on Facebook"><span class="fab fa-facebook-f fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2ffree5gc.org%2finstallations%2fstage-2-standalone-5g%2f" title="Share on LinkedIn"><span class="fab fa-linkedin-in fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/intent/tweet?url=https%3a%2f%2ffree5gc.org%2finstallations%2fstage-2-standalone-5g%2f&amp;text=" title="Tweet this"><span class="fab fa-twitter fa-2x"></span></a>
    </nav>
  </section>


  

  
  </footer>
  

</article> 



      
      <footer class="pt-4 my-md-5 pt-md-5 border-top">
        <div class="row">
          <div class="col-12 col-md">
	    <a href="https://free5gc.org"><img class="mb-2" src="/img/free5GC.png" alt="" height="32"></a>
            <small class="d-block mb-1 text-muted">&copy; Copyright January 2019 free5GC.org</small>
            <small class="d-block mb-1 text-muted">All rights reserved.</small>
          </div>
          <div class="col-6 col-md">
            <h5>Contact:</h5>
            <ul class="list-unstyled text-small">
              <li>
                <a class="link-secondary" href="mailto:free5GC.org@gmail.com"
                   target="_self"><span style="text-decoration:underline">free5GC.org@gmail.com</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </footer>
      
    </div> <!-- /.container-fluid -->
  </body>

</html>

