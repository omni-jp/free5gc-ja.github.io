<!DOCTYPE html>
<html lang="en" >

  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta property="og:title" content="" />
<meta property="og:description" content="SMF Config / ULCL Config This document explains the detail of SMF config. Also provide some examples about conversion between config file and real userplane topology
ULCL limitation: The branching UPF now can&rsquo;t connect to the Internet. It only serves as a Intranet in the UPF topology. (Please refers to the topology of example 2)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://free5gc.org/installations/stage-3-smf-config/" />




<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="SMF Config / ULCL Config This document explains the detail of SMF config. Also provide some examples about conversion between config file and real userplane topology
ULCL limitation: The branching UPF now can&rsquo;t connect to the Internet. It only serves as a Intranet in the UPF topology. (Please refers to the topology of example 2)"/>
<meta name="generator" content="Hugo 0.79.1" />

    
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "headline": "",
  "url": "https://free5gc.org/installations/stage-3-smf-config/",
  "wordCount": "345",
  "datePublished": "0001-01-01T00:00:00+00:00",
  "author": {
    "@type": "Person",
    "name": "Your Name"
  }
}
</script>



    <link rel="canonical" href="https://free5gc.org/installations/stage-3-smf-config/">

    <title> | free5GC</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">

    <!-- combined, minified CSS -->
    
    <link href="https://free5gc.org/css/bootstrap-icons.0568af55d343ad2fc9c221a17a15697dc5ef49add4551c5eb3e59d7582385228.css" rel="stylesheet">
    
    <link href="https://free5gc.org/css/style.73f0736b85bdf48090ed384697200a968c025d194f60717e37a515c4c87a8893.css" rel="stylesheet">

    <!-- minified base javascript -->
    
    <script defer src="https://free5gc.org/js/base.e5993f7509e480925eff41173b2176d6d85ef3df70ad0388d9275d09f0c3d966.js" crossorigin="anonymous"></script>

    

  </head>

  <body>

    
    <header class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
      <p class="h5 my-0 me-md-auto fw-normal">
        <a class="nav-link " href="https://free5gc.org">
          <img src="/img/free5GC.png" width="217" height="51">
        </a>
      </p>
      <nav class="btn-group" role="group" aria-label="Basic outlined example">
          
          <a class="btn btn-outline-primary"
             href="/" title="Home">Home</a>
          
        
          
          <a class="btn btn-outline-primary"
             href="/roadmap/" title="Roadmap">Roadmap</a>
          
        
          
          <div id="btn-group-install" class="btn-group" role="group">
            <button type="button"
                    class="btn btn-outline-primary dropdown-toggle active"
                    data-bs-toggle="dropdown" aria-expanded="false">
              Installations
            </button>
            <ul class="dropdown-menu" aria-labelledby="btn-group-install">
              
              <li><a class="dropdown-item"
                     
                     title="Stage 1: Cluster"
                     href="/installations/stage-1-cluster/">Stage 1: Cluster</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="Stage 1: All-in-one"
                     href="/installations/stage-1-all-in-one/">Stage 1: All-in-one</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="Stage 2: Standalone 5G"
                     href="/installations/stage-2-standalone-5g/">Stage 2: Standalone 5G</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="Stage 3: free5GC"
                     href="/installations/stage-3/">Stage 3: free5GC</a></li>
              
            </ul>
          </div>
          
        
          
          <a class="btn btn-outline-primary"
             href="/membership/" title="Membership">Membership</a>
          
        
          
          <a class="btn btn-outline-primary"
             href="/contactus/" title="Contact Us">Contact Us</a>
          
        
          
          <div id="btn-group-more" class="btn-group" role="group">
            <button type="button"
                    class="btn btn-outline-primary dropdown-toggle"
                    data-bs-toggle="dropdown" aria-expanded="false">
              More
            </button>
            <ul class="dropdown-menu" aria-labelledby="btn-group-more">
              
              <li><a class="dropdown-item"
                     target="_blank"
                     title="Download"
                     href="https://github.com/free5gc/free5gc">Download</a></li>
              
              <li><a class="dropdown-item"
                     target="_blank"
                     title="Youtube"
                     href="https://www.youtube.com/channel/UCywP5Acj50GlhSxZTJXlqtw/videos">Youtube</a></li>
              
              <li><a class="dropdown-item"
                     target="_blank"
                     title="free5GC Forum"
                     href="https://forum.free5gc.org/">free5GC Forum</a></li>
              
              <li><a class="dropdown-item"
                     
                     title="History"
                     href="/history/">History</a></li>
              
            </ul>
          </div>
          
        
      </nav>
    </header>
    

    <div class="container-fluid mx-auto" style="max-width: 960px;">

      


<article class="blog-post">
  <header>
    <h2 class="blog-post-title" dir="auto"><a href="https://free5gc.org/installations/stage-3-smf-config/"></a></h2>
    <p class="blog-post-meta">

</p>
  </header>
  <h1 id="smf-config--ulcl-config">SMF Config / ULCL Config</h1>
<p>This document explains the detail of SMF config.
Also provide some examples about conversion between config file and real userplane topology</p>
<p><em><strong>ULCL limitation:
The branching UPF now can&rsquo;t connect to the Internet. 
It only serves as a Intranet in the UPF topology.
(Please refers to the topology of example 2)</strong></em></p>
<h2 id="sbi">SBI</h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>scheme</td>
<td>The protocol for SBI</td>
</tr>
<tr>
<td>ipv4Addr</td>
<td>SMF provide the SBI service on this IP</td>
</tr>
<tr>
<td>port</td>
<td>SMF bind the SBI service to this port</td>
</tr>
</tbody>
</table>
<h2 id="pfcp">PFCP</h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>addr</td>
<td>SMF bind PFCP to this IP</td>
</tr>
</tbody>
</table>
<h2 id="userplane-information">Userplane Information</h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>userplane_information</td>
<td>Includes topology and information of RAN and UPFs which are controlled by this SMF</td>
</tr>
<tr>
<td>up_nodes</td>
<td>The node in the user plane topology. Includes gNodeB, I-UPF and A-UPF</td>
</tr>
<tr>
<td>links</td>
<td>The edge in the user plane topology</td>
</tr>
<tr>
<td>type</td>
<td>Indicate it is RAN or specific kind of  UPF</td>
</tr>
<tr>
<td>an_ip</td>
<td>The IPv4 address of RAN</td>
</tr>
<tr>
<td>node_id</td>
<td>The PFCP IPv4 address for UPF</td>
</tr>
<tr>
<td>up_resource_ip</td>
<td>The user plane IPv4 address for UPF</td>
</tr>
</tbody>
</table>
<p><em><strong>Note:<br>
up_resource_ip serves as default user plane IP for the UPF.<br>
In this version, UPF will determine its user plane IP by itself.<br>
So setting up_resource_ip in SMF config won&rsquo;t affect real config in user plane.</strong></em></p>
<h1 id="amf-config">AMF Config</h1>
<p>To understand whole PDU session config, we must take a step forward to understand the AMF config.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>NGAPIPList</td>
<td>AMF bind NGAP to this IP</td>
</tr>
<tr>
<td>SBI</td>
<td>Same meaning with SMF/SBI.</td>
</tr>
</tbody>
</table>
<h1 id="example-1">Example 1</h1>
<h3 id="smf-config">SMF Config</h3>
<ul>
<li>sbi:
<ul>
<li>scheme: https</li>
<li>ipv4Addr: 127.0.0.1</li>
<li>port: 29502</li>
</ul>
</li>
<li>pfcp:
<ul>
<li>addr: 10.200.200.1</li>
</ul>
</li>
<li>userplane_information:
<ul>
<li>up_nodes:
<ul>
<li>gNB1:
<ul>
<li>type: AN</li>
<li>an_ip: 192.188.2.3</li>
</ul>
</li>
<li>UPF:
<ul>
<li>type: UPF</li>
<li>node_id: 10.200.200.101</li>
<li>up_resource_ip: 192.188.2.2</li>
</ul>
</li>
</ul>
</li>
<li>links:
<ul>
<li>A: gNB1</li>
<li>B: UPF</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="amf-config-1">AMF Config</h3>
<ul>
<li>ngapIpList:
<ul>
<li>127.0.0.1</li>
</ul>
</li>
<li>sbi:
<ul>
<li>scheme: https</li>
<li>ipv4Addr: 127.0.0.1</li>
<li>port: 29518</li>
</ul>
</li>
</ul>
<h3 id="representing-topology">Representing Topology</h3>
<p><img src="https://i.imgur.com/qBz78pt.png" alt=""></p>
<h1 id="example-2">Example 2</h1>
<h3 id="smf-config-1">SMF Config</h3>
<ul>
<li>sbi:
<ul>
<li>scheme: https</li>
<li>ipv4Addr: 127.0.0.1</li>
<li>port: 29502</li>
</ul>
</li>
<li>pfcp:
<ul>
<li>addr: 10.200.200.1</li>
</ul>
</li>
<li>userplane_information:
<ul>
<li>up_nodes:
<ul>
<li>gNB1:
<ul>
<li>type: AN</li>
<li>an_ip: 192.188.2.3</li>
</ul>
</li>
<li>BranchingUPF:
<ul>
<li>type: UPF</li>
<li>node_id: 10.200.200.102</li>
<li>up_resource_ip: 192.188.2.2</li>
</ul>
</li>
<li>AnchorUPF1:
<ul>
<li>type: UPF</li>
<li>node_id: 10.200.200.101</li>
<li>up_resource_ip: 192.188.2.23</li>
</ul>
</li>
<li>AnchorUPF2:
<ul>
<li>type: UPF</li>
<li>node_id: 10.200.200.103</li>
<li>up_resource_ip: 192.188.2.24</li>
</ul>
</li>
<li>links:
<ul>
<li>A: gNB1
B: BranchingUPF</li>
<li>A: BranchingUPF
B: AnchorUPF1</li>
<li>A: BranchingUPF
B: AnchorUPF2</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="amf-config-2">AMF Config</h3>
<ul>
<li>ngapIpList:
<ul>
<li>127.0.0.1</li>
</ul>
</li>
<li>sbi:
<ul>
<li>scheme: https</li>
<li>ipv4Addr: 127.0.0.1</li>
<li>port: 29518</li>
</ul>
</li>
</ul>
<h3 id="representing-topology-1">Representing Topology</h3>
<p><img src="https://i.imgur.com/HKN4Ck7.png" alt=""></p>


  

  
  <hr>
  <footer>

  
    <section>
    <h4></h4>
    <nav class="nav sharing-icons">
      <a class="nav-item" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ffree5gc.org%2finstallations%2fstage-3-smf-config%2f" title="Share on Facebook"><span class="fab fa-facebook-f fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2ffree5gc.org%2finstallations%2fstage-3-smf-config%2f" title="Share on LinkedIn"><span class="fab fa-linkedin-in fa-2x" aria-hidden="true"></span></a>
      <a class="nav-item" href="https://twitter.com/intent/tweet?url=https%3a%2f%2ffree5gc.org%2finstallations%2fstage-3-smf-config%2f&amp;text=" title="Tweet this"><span class="fab fa-twitter fa-2x"></span></a>
    </nav>
  </section>


  

  
  </footer>
  

</article> 



      
      <footer class="pt-4 my-md-5 pt-md-5 border-top">
        <div class="row">
          <div class="col-12 col-md">
	    <a href="https://free5gc.org"><img class="mb-2" src="/img/free5GC.png" alt="" height="32"></a>
            <small class="d-block mb-1 text-muted">&copy; Copyright January 2019 free5GC.org</small>
            <small class="d-block mb-1 text-muted">All rights reserved.</small>
          </div>
          <div class="col-6 col-md">
            <h5>Contact:</h5>
            <ul class="list-unstyled text-small">
              <li>
                <a class="link-secondary" href="mailto:free5GC.org@gmail.com"
                   target="_self"><span style="text-decoration:underline">free5GC.org@gmail.com</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </footer>
      
    </div> <!-- /.container-fluid -->
  </body>

</html>

